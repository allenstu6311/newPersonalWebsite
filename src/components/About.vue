<template>
  <div id="about" class="sub-color blank">
    <b-row class="custom-row">
      <!-- å€‹äººç…§ç‰‡ -->
      <b-col class="pic" sm="12" md="12" lg="6">
        <b-img :src="picPath" rounded="circle" fluid alt="Responsive image" @click="callEmojil">
        </b-img>
        <ul class="emojil-list">
          <li v-for="(item, index) in emolijArr" :key="index" class="emojil" :class="`emojil_${index}`">{{ item }}
          </li>
        </ul>
      </b-col>
      <!-- æ–‡å­—ä»‹ç´¹ -->
      <b-col class="content" sm="12" md="12" lg="6">
        <b-col class="title">
          <h1 class="bold">ABOUT ME !</h1>
        </b-col>
        <b-col class="text">
          <p>
            æˆ‘æ˜¯ä¸€ä½æ“æœ‰æ£’çƒèƒŒæ™¯çš„å‰ç«¯å·¥ç¨‹å¸«ã€‚å­¸ç”Ÿæ™‚æœŸï¼Œæˆ‘æ¯å¤©åœ¨çƒå ´ä¸Šå¥”é¦³æ®ç‘æ±—æ°´ã€‚é›–ç„¶æœªèƒ½æ‰“é€²è·æ£’ï¼Œä½†é€™æ®µæ™‚é–“ç£¨ç·´äº†æˆ‘ä¸æ€•è‹¦çš„ç²¾ç¥å’Œå …æŒåˆ°åº•çš„æ¯…åŠ›ã€‚ç•¢æ¥­å¾Œï¼Œæˆ‘æŠ•å…¥é«”èƒ½æ•™ç·´çš„å·¥ä½œï¼Œå”åŠ©å­¸ç”Ÿé”åˆ°æ›´å¥åº·çš„èº«é«”ç‹€æ…‹ã€‚ç„¶è€Œï¼Œç”±æ–¼ç–«æƒ…ä»¥åŠå·¥ä½œæ€§è³ªçš„é—œä¿‚ï¼Œæˆ‘é–‹å§‹æ„Ÿå—åˆ°é€™ä»½å·¥ä½œçš„ä¸ç©©å®šæ€§ï¼Œå°æ–¼è¡Œæ¥­å‰æ™¯ä¹Ÿç”¢ç”Ÿäº†æ“”æ†‚ã€‚
          </p>
          <p>
            åœ¨é€™å€‹é—œéµçš„æ™‚åˆ»ï¼Œæˆ‘æ¥å—äº†è¦ªå‹çš„ä»‹ç´¹ï¼Œé€²å…¥äº†TibaMeç·¯è‚²çš„å‰ç«¯å·¥ç¨‹å¸«å°ˆæ¥­é€²ä¿®èª²ç¨‹ã€‚æˆ‘å°æ–¼å¯«ç¨‹å¼æŠ±æœ‰æ¥µå¤§çš„èˆˆè¶£ï¼Œä¸¦åœ¨é€²ä¿®æœŸé–“é©šå–œåœ°ç™¼ç¾è‡ªå·±èƒ½å¤ è¶…å‰é€²åº¦åœ°å­¸ç¿’ã€‚æˆ‘çš„å¥½å¥‡å¿ƒé©…ä½¿è‘—æˆ‘ä¸æ–·æ¢ç´¢æ–°äº‹ç‰©ï¼Œè¿½æ±‚æ–°çš„çŸ¥è­˜ã€‚é€²å…¥è·å ´å¾Œï¼Œæˆ‘ç™¼ç¾è‡ªå·±ä¹‹å‰æ‰€å­¸åƒ…åƒ…åªæ˜¯å†°å±±ä¸€è§’ã€‚çœŸæ­£è»Ÿé«”é–‹ç™¼çš„æµç¨‹å’ŒæŠ€è¡“ä»¤æˆ‘åƒé©šï¼Œä½†æˆ‘ä¸¦æ²’æœ‰å› æ­¤æ„Ÿåˆ°æ²®å–ªï¼Œåè€Œè¢«æœªçŸ¥çš„ä¸–ç•Œé»ç‡ƒäº†å­¸ç¿’çš„æ¬²æœ›ä¹‹ç«ï¼æˆ‘æ¸´æœ›ä¸æ–·ç²¾é€²è‡ªå·±çš„æŠ€èƒ½ï¼Œä¸¦ä»¥æœ€å¿«çš„é€Ÿåº¦æˆç‚ºä¸€ä½è³‡æ·±å·¥ç¨‹å¸«ã€‚
          </p>
        </b-col>
        <!-- æŒ‰éˆ• -->
        <b-col class="button">
          <Button label="æŸ¥çœ‹ç°¡æ­·" id="tooltip-target-1" @btnOnClick="$bvModal.show('bv-modal-resume')"></Button>
          <!-- tip -->
          <b-tooltip target="tooltip-target-1" triggers="hover" placement="left" v-if="hideToolip == 'show'">
            <embed :src="pdfPath" type="application/pdf" width="100%" height="100%" />
          </b-tooltip>
        </b-col>
      </b-col>
    </b-row>
    <!-- å±¥æ­·ç‡ˆç®± -->
    <b-modal id="bv-modal-resume" ok-title="ä¸‹è¼‰" cancel-title="é—œé–‰" @ok="openCheckModal" @shown="controlTooltip('show')"
      @hidden="controlTooltip('')">
      <embed :src="pdfPath" type="application/pdf" width="100%" height="100%" />
    </b-modal>
    <!-- ç¢ºèªç‡ˆç®± -->
    <b-modal id="bv-modal-check" centered ok-title="ç¢ºå®š" cancel-title="å–æ¶ˆ" @ok="download">ç¢ºå®šä¸‹è¼‰?</b-modal>
    <!-- é€šçŸ¥è¨Šæ¯ -->
    <b-toast id="download-toast" :variant="sendStatus" solid>
      <template #toast-title>
        <div class="d-flex flex-grow-1 align-items-baseline">
          <strong class="mr-auto">é€šçŸ¥</strong>
        </div>
      </template>
      {{ sendResult }}
    </b-toast>
  </div>
</template>
<script lang="ts">
import Component from "vue-class-component";
import Vue from "vue";
import Button from "../components/tool/Button.vue";
import pdfData from "../assets/image/vitae.pdf";
import personalphoto from "../assets/image/personalphoto.jpg";
import { saveAs } from "file-saver";
import { gsap, Power1, Power4 } from "gsap";
import SharedMixin from "../assets/static/js/util"

@Component({
  components: {
    Button,
  },
  mixins: [SharedMixin],
})
export default class About extends Vue {
  public pdfPath: string = pdfData;
  public picPath: string = personalphoto;
  public sendResult: string = "";
  public sendStatus: string = "";
  public hideToolip: string = '';
  public SharedMixin = new SharedMixin();
  public emolijArr: string[] = []

  mounted() {
    this.controlTooltip('')
    let tl: any = gsap.timeline();
  }

  openCheckModal(e: MouseEvent) {
    e.preventDefault();
    this.$bvModal.show("bv-modal-check");
  }

  controlTooltip(status: string) {
    if (status == 'show') {
      this.hideToolip = 'hide'
    } else {
      this.hideToolip = 'show'
    }
  }



  emojilAnimation() {
    this.emolijArr.push("ğŸ˜")
    let tl: any = gsap.timeline();

    this.$nextTick(() => {
      tl.set(`emojil_${this.emolijArr.length - 1}`, {
        scale: .2,
      })

      tl.to(`.emojil_${this.emolijArr.length - 1}`, 1.5, {
        x: Math.random() * 200 - 100,
        y: -150 + Math.random() * 100 - 100,
        scale: 3,
        ease: Power4.easeOut,
      })
        .to(`.emojil_${this.emolijArr.length - 1}`, 2, {
          ease: Power1.easeIn,
          scale: 0
        })

    })
  }

  callEmojil() {
    this.emojilAnimation()
  }

  download() {
    try {
      // ä¸‹è¼‰æª”æ¡ˆ
      saveAs(this.pdfPath, "å±¥æ­·.pdf");
      this.sendResult = "ä¸‹è¼‰æˆåŠŸ";
      this.sendStatus = "warning";
      this.$bvToast.show("download-toast");
    } catch (err) {
      this.sendResult = "ä¸‹è¼‰å¤±æ•—";
      this.sendStatus = "danger";
      this.$bvToast.show("download-toast");
    }
  }
}
</script>
<style scoped>
#about .pic {
  padding: 20px 0px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.emojil {
  position: absolute;
  left: 50%;
  /* bottom: 0; */
  /* opacity: 0; */
}

#about .pic img {
  width: 70%;
  box-shadow: 0px 0px 10px rgb(163, 162, 162);
  cursor: pointer;
}

/* .content .title {
  text-align: center;
  padding: 50px 20px;
} */

.content .title h1 {
  letter-spacing: 3px;
  font-size: 50px;
  color: #fff;
}

.content .text {
  width: 80%;
  margin: auto;
  line-height: 2;
  font-size: 16px;
  letter-spacing: 2px;
  color: #fff;
}

.content .button {
  width: 80%;
  padding-bottom: 30px;
  margin: auto;
}

.tooltip {
  cursor: pointer;
}


@media screen and (max-width: 990px) {
  #about .button {
    text-align: center;
  }

  .content .title h1 {
    font-size: 40px;
    white-space: nowrap;
  }
}
</style>

